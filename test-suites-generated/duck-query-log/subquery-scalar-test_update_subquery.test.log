PRAGMA enable_verification;
CREATE TABLE integers(id INTEGER, i INTEGER);
INSERT INTO integers VALUES (1, 1), (2, 2), (3, 3), (4, NULL);
UPDATE integers i1 SET i=(SELECT MAX(i) FROM integers WHERE i1.i<>i);
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
;
;
;
SELECT id, i FROM integers ORDER BY id;
UPDATE integers i1 SET i=(SELECT MAX(i) FROM integers) WHERE i=(SELECT MIN(i) FROM integers);
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
;
;
;
SELECT id, i FROM integers ORDER BY id;
UPDATE integers i1 SET i=(SELECT MAX(id) FROM integers WHERE id<i1.id);
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
;
;
;
SELECT id, i FROM integers ORDER BY id;
UPDATE integers i1 SET i=2 WHERE i<(SELECT MAX(id) FROM integers WHERE i1.id<id);;
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
;
;
;
SELECT id, i FROM integers ORDER BY id;
UPDATE integers i1 SET i=DEFAULT WHERE i=(SELECT MIN(i) FROM integers WHERE i1.id<id);;
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
SELECT id, i FROM integers ORDER BY id;
SELECT id, i FROM integers ORDER BY id;
;
;
;
;
SELECT id, i FROM integers ORDER BY id;
