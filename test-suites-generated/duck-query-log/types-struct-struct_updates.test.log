PRAGMA enable_verification;
CREATE TABLE a(b ROW(i INTEGER, j INTEGER));;
INSERT INTO a VALUES ({'i': 1, 'j': 2});;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;;
;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;
;
;
;
;
SELECT * FROM a ORDER BY (b).i;;
UPDATE a SET b={'i': 3, 'j': 4};
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;;
;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;
;
;
;
;
SELECT * FROM a ORDER BY (b).i;;
UPDATE a SET b=NULL;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;;
;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;
;
;
;
;
SELECT * FROM a ORDER BY (b).i;;
UPDATE a SET b={'i': NULL, 'j': 4};
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;;
;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;
;
;
;
;
SELECT * FROM a ORDER BY (b).i;;
UPDATE a SET b={'i': 3, 'j': NULL};
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;;
;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;
;
;
;
;
SELECT * FROM a ORDER BY (b).i;;
BEGIN TRANSACTION;;
UPDATE a SET b={'i': 3, 'j': 4};
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;;
;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;
;
;
;
;
SELECT * FROM a ORDER BY (b).i;;
ROLLBACK;;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;;
;
SELECT * FROM a ORDER BY (b).i;;
SELECT * FROM a ORDER BY (b).i;
;
;
;
;
SELECT * FROM a ORDER BY (b).i;;
INSERT INTO a VALUES ({'i': 2, 'j': 3});;
SELECT * FROM a;
SELECT * FROM a;
;
SELECT * FROM a;
SELECT * FROM a;
;
;
;
;
SELECT * FROM a;
INSERT INTO a VALUES ({'i': 3, 'j': 4});;
SELECT * FROM a;
SELECT * FROM a;
;
SELECT * FROM a;
SELECT * FROM a;
;
;
;
;
SELECT * FROM a;
UPDATE a SET b={'i': NULL, 'j': NULL} WHERE (b).j>=3;
SELECT * FROM a;
SELECT * FROM a;
;
SELECT * FROM a;
SELECT * FROM a;
;
;
;
;
SELECT * FROM a;
