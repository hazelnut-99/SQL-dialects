PRAGMA enable_verification;
ATTACH DATABASE ':memory:' AS new_database;;
CREATE TABLE t1 AS SELECT 42 i;
CREATE SCHEMA new_database.s1;;
CREATE VIEW new_database.s1.v1 AS SELECT * FROM t1;
SELECT * FROM new_database.s1.v1;
SELECT * FROM new_database.s1.v1;
;
SELECT * FROM new_database.s1.v1;
SELECT * FROM new_database.s1.v1;
;
;
;
;
SELECT * FROM new_database.s1.v1;
CREATE TABLE new_database.s1.t1 AS SELECT 84 i;
CREATE OR REPLACE VIEW new_database.s1.v1 AS SELECT * FROM new_database.s1.t1;
SELECT * FROM new_database.s1.t1;
SELECT * FROM new_database.s1.t1;
;
SELECT * FROM new_database.s1.t1;
SELECT * FROM new_database.s1.t1;
;
;
;
;
SELECT * FROM new_database.s1.t1;
SELECT * FROM new_database.s1.v1;
SELECT * FROM new_database.s1.v1;
;
SELECT * FROM new_database.s1.v1;
SELECT * FROM new_database.s1.v1;
;
;
;
;
SELECT * FROM new_database.s1.v1;
CREATE OR REPLACE VIEW new_database.s1.v1 AS SELECT * FROM new_database.s1.t1 UNION ALL FROM t1 ORDER BY ALL;
SELECT * FROM new_database.s1.v1;
SELECT * FROM new_database.s1.v1;
;
SELECT * FROM new_database.s1.v1;
SELECT * FROM new_database.s1.v1;
;
;
;
;
SELECT * FROM new_database.s1.v1;
ALTER VIEW new_database.s1.v1 RENAME TO v2;
SELECT * FROM new_database.s1.v2;
SELECT * FROM new_database.s1.v2;
;
SELECT * FROM new_database.s1.v2;
SELECT * FROM new_database.s1.v2;
;
;
;
;
SELECT * FROM new_database.s1.v2;
DROP VIEW new_database.s1.v2;
DROP TABLE new_database.s1.t1;
CREATE VIEW new_database.v1 AS SELECT * FROM t1;
SELECT * FROM new_database.v1;
SELECT * FROM new_database.v1;
;
SELECT * FROM new_database.v1;
SELECT * FROM new_database.v1;
;
;
;
;
SELECT * FROM new_database.v1;
CREATE TABLE new_database.t1 AS SELECT 84 i;
CREATE OR REPLACE VIEW new_database.v1 AS SELECT * FROM new_database.t1;
SELECT * FROM new_database.t1;
SELECT * FROM new_database.t1;
;
SELECT * FROM new_database.t1;
SELECT * FROM new_database.t1;
;
;
;
;
SELECT * FROM new_database.t1;
SELECT * FROM new_database.v1;
SELECT * FROM new_database.v1;
;
SELECT * FROM new_database.v1;
SELECT * FROM new_database.v1;
;
;
;
;
SELECT * FROM new_database.v1;
CREATE OR REPLACE VIEW new_database.v1 AS SELECT * FROM new_database.t1 UNION ALL FROM t1 ORDER BY ALL;
SELECT * FROM new_database.v1;
SELECT * FROM new_database.v1;
;
SELECT * FROM new_database.v1;
SELECT * FROM new_database.v1;
;
;
;
;
SELECT * FROM new_database.v1;
ALTER VIEW new_database.v1 RENAME TO v2;
SELECT * FROM new_database.v2;
SELECT * FROM new_database.v2;
;
SELECT * FROM new_database.v2;
SELECT * FROM new_database.v2;
;
;
;
;
SELECT * FROM new_database.v2;
DROP VIEW new_database.v2;
DROP TABLE new_database.t1;
