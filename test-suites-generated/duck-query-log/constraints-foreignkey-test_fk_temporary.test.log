CREATE TEMPORARY TABLE album(artistid INTEGER, albumname TEXT, albumcover TEXT, UNIQUE (artistid, albumname));;
INSERT INTO album VALUES (1, 'A', 'A_cover'), (2, 'B', 'B_cover'), (3, 'C', 'C_cover'), (4, 'D', 'D_cover');;
CREATE TEMPORARY TABLE song(songid INTEGER, songartist INTEGER, songalbum TEXT, songname TEXT, FOREIGN KEY(songartist, songalbum) REFERENCES album(artistid, albumname));;
INSERT INTO song VALUES (11, 1, 'A', 'A_song'), (12, 2, 'E', 'B_song'), (13, 3, 'C', 'C_song');;
INSERT INTO song VALUES (11, 1, 'A', 'A_song'), (12, 5, 'D', 'B_song'), (13, 3, 'C', 'C_song');;
INSERT INTO song VALUES (11, 1, 'A', 'A_song'), (12, 2, 'B', 'B_song'), (13, 3, 'C', 'C_song');;
DELETE FROM album WHERE albumname='C';;
DELETE FROM album WHERE albumname='D';;
SELECT * FROM album;;
UPDATE song SET songartist=5, songalbum='A' WHERE songname='B_song';;
UPDATE song SET songartist=1, songalbum='A' WHERE songname='B_song';;
SELECT * FROM album;;
SELECT * FROM song;;
UPDATE album SET albumname='B' WHERE albumcover='C_cover';;
UPDATE song SET songalbum='E' WHERE albumcover='C_song';;
UPDATE album SET artistid=5, albumname='D' WHERE albumcover='B_cover';;
SELECT * FROM album;;
UPDATE album SET albumcover='C_cover_new' WHERE artistid=3;;
UPDATE song SET songname='C_song_new' WHERE songartist=3;;
SELECT * FROM album;;
SELECT * FROM song;;
ALTER TABLE album RENAME COLUMN albumname TO albumname_new;;
ALTER TABLE song RENAME COLUMN songalbum TO songalbum_new;;
ALTER TABLE song RENAME COLUMN songname TO songname_new;;
ALTER TABLE song ALTER COLUMN songartist SET DATA TYPE TEXT;;
ALTER TABLE album ALTER COLUMN artistid SET DATA TYPE TEXT;;
ALTER TABLE song ALTER COLUMN songname_new SET DATA TYPE VARCHAR;;
ALTER TABLE album DROP COLUMN artistid;;
ALTER TABLE song DROP COLUMN songname_new;;
DROP TABLE album;;
DROP TABLE song;;
ALTER TABLE album RENAME COLUMN albumname TO albumname_new;;
ALTER TABLE album ALTER COLUMN albumcover SET DATA TYPE VARCHAR;;
ALTER TABLE album DROP COLUMN albumcover;;
DROP TABLE album;;
CREATE TABLE pkt(i INTEGER UNIQUE, k INTEGER UNIQUE);
INSERT INTO pkt VALUES (1, 11), (2, 12), (3, 13);
CREATE TABLE fkt(j INTEGER, l INTEGER UNIQUE, FOREIGN KEY (j) REFERENCES pkt(i));
CREATE INDEX k_index ON pkt(k);
CREATE INDEX l_index ON fkt(l);
INSERT INTO fkt VALUES (1, 101), (2, 102);
INSERT INTO fkt VALUES (4, 104);
INSERT INTO fkt VALUES (3, 103);
DELETE FROM pkt WHERE k=13;
DELETE FROM fkt WHERE l=103;
DELETE FROM pkt WHERE k=13;
UPDATE pkt SET i=5 WHERE k=12;
UPDATE fkt SET i=4 WHERE l=102;
UPDATE fkt SET i=4 WHERE l=102;
DROP INDEX k_index;
DROP INDEX l_index;
DROP TABLE pkt;;
DROP TABLE fkt;;
DROP TABLE pkt;;
CREATE SCHEMA s1;
CREATE TABLE s1.pkt(i INTEGER PRIMARY KEY);
CREATE TABLE s1.fkt(j INTEGER, FOREIGN KEY (j) REFERENCES s1.pkt(i));
INSERT INTO s1.pkt VALUES (1), (2), (3), (4), (5);
INSERT INTO s1.fkt VALUES (2), (3);
INSERT INTO s1.fkt VALUES (6);
INSERT INTO s1.fkt VALUES (1);
DELETE FROM s1.pkt WHERE i=2;
DELETE FROM s1.pkt WHERE i=5;
DROP TABLE s1.pkt;;
DROP TABLE s1.fkt;;
DROP TABLE s1.pkt;;
CREATE TABLE pkt(i INTEGER UNIQUE);
CREATE TABLE fkt(j INTEGER, FOREIGN KEY (j) REFERENCES pkt(i));
INSERT INTO fkt VALUES (NULL);
