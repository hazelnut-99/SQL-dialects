PRAGMA enable_verification;
create table a(i integer);;
insert into a values (42);;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1;;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1;;
;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1;;
WITH cte1 AS MATERIALIZED (SELECT i AS j FROM a)SELECT * FROM cte1;
;
;
;
;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1;;
with cte1 as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
with cte1 as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
;
with cte1 as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
WITH cte1 AS MATERIALIZED (SELECT i AS j FROM a)SELECT x FROM cte1 AS t1(x);
;
;
;
;
with cte1 as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select xxx from cte1;;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select xxx from cte1;;
;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select xxx from cte1;;
WITH cte1 (xxx) AS MATERIALIZED (SELECT i AS j FROM a)SELECT xxx FROM cte1;
;
;
;
;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select xxx from cte1;;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
WITH cte1 (xxx) AS MATERIALIZED (SELECT i AS j FROM a)SELECT x FROM cte1 AS t1(x);
;
;
;
;
with cte1(xxx) as MATERIALIZED (Select i as j from a) select x from cte1 t1(x);;
with cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 , cte3;;
with cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 , cte3;;
;
with cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 , cte3;;
WITH cte1 AS MATERIALIZED (SELECT i AS j FROM a), cte2 AS MATERIALIZED (SELECT "ref".j AS k FROM cte1 AS "ref"), cte3 AS MATERIALIZED (SELECT (ref2.j + 1) AS i FROM cte1 AS ref2)SELECT * FROM cte2 , cte3;
;
;
;
;
with cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 , cte3;;
with cte1 as MATERIALIZED (select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 union all select * FROM cte3;;
with cte1 as MATERIALIZED (select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 union all select * FROM cte3;;
;
with cte1 as MATERIALIZED (select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 union all select * FROM cte3;;
WITH cte1 AS MATERIALIZED (SELECT i AS j FROM a), cte2 AS MATERIALIZED (SELECT "ref".j AS k FROM cte1 AS "ref"), cte3 AS MATERIALIZED (SELECT (ref2.j + 1) AS i FROM cte1 AS ref2)(SELECT * FROM cte2) UNION ALL (SELECT * FROM cte3);
;
;
;
;
with cte1 as MATERIALIZED (select i as j from a), cte2 as MATERIALIZED (select ref.j as k from cte1 as ref), cte3 as MATERIALIZED (select ref2.j+1 as i from cte1 as ref2) select * from cte2 union all select * FROM cte3;;
with cte3 as MATERIALIZED (select ref2.j as i from cte1 as ref2), cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j+1 as k from cte1 as ref) select * from cte2 union all select * FROM cte3;;
with cte3 as MATERIALIZED (select ref2.j as i from cte1 as ref2), cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j+1 as k from cte1 as ref) select * from cte2 union all select * FROM cte3;;
;
with cte3 as MATERIALIZED (select ref2.j as i from cte1 as ref2), cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j+1 as k from cte1 as ref) select * from cte2 union all select * FROM cte3;;
WITH cte3 AS MATERIALIZED (SELECT ref2.j AS i FROM cte1 AS ref2), cte1 AS MATERIALIZED (SELECT i AS j FROM a), cte2 AS MATERIALIZED (SELECT ("ref".j + 1) AS k FROM cte1 AS "ref")(SELECT * FROM cte2) UNION ALL (SELECT * FROM cte3);
;
;
;
;
with cte3 as MATERIALIZED (select ref2.j as i from cte1 as ref2), cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j+1 as k from cte1 as ref) select * from cte2 union all select * FROM cte3;;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 cte11, cte1 cte12;;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 cte11, cte1 cte12;;
;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 cte11, cte1 cte12;;
WITH cte1 AS MATERIALIZED (SELECT i AS j FROM a)SELECT * FROM cte1 AS cte11 , cte1 AS cte12;
;
;
;
;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 cte11, cte1 cte12;;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 where j = (select max(j) from cte1 as cte2);;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 where j = (select max(j) from cte1 as cte2);;
;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 where j = (select max(j) from cte1 as cte2);;
WITH cte1 AS MATERIALIZED (SELECT i AS j FROM a)SELECT * FROM cte1 WHERE (j = (SELECT max(j) FROM cte1 AS cte2));
;
;
;
;
with cte1 as MATERIALIZED (Select i as j from a) select * from cte1 where j = (select max(j) from cte1 as cte2);;
with cte1(x, y) as MATERIALIZED (select 42 a, 84 b) select zzz, y from cte1 t1(zzz);;
with cte1(x, y) as MATERIALIZED (select 42 a, 84 b) select zzz, y from cte1 t1(zzz);;
;
with cte1(x, y) as MATERIALIZED (select 42 a, 84 b) select zzz, y from cte1 t1(zzz);;
WITH cte1 (x, y) AS MATERIALIZED (SELECT 42 AS a, 84 AS b)SELECT zzz, y FROM cte1 AS t1(zzz);
;
;
;
;
with cte1(x, y) as MATERIALIZED (select 42 a, 84 b) select zzz, y from cte1 t1(zzz);;
create view va AS (with cte as MATERIALIZED (Select i as j from a) select * from cte);;
select * from va;
select * from va;
;
select * from va;
SELECT * FROM va;
;
;
;
;
select * from va;
with cte AS MATERIALIZED (SELECT * FROM va) SELECT * FROM cte;;
with cte AS MATERIALIZED (SELECT * FROM va) SELECT * FROM cte;;
;
with cte AS MATERIALIZED (SELECT * FROM va) SELECT * FROM cte;;
WITH cte AS MATERIALIZED (SELECT * FROM va)SELECT * FROM cte;
;
;
;
;
with cte AS MATERIALIZED (SELECT * FROM va) SELECT * FROM cte;;
create view vb AS (with cte1 as MATERIALIZED (Select i as j from a), cte2 as MATERIALIZED (select ref.j+1 as k from cte1 as ref) select * from cte2);;
select * from vb;
select * from vb;
;
select * from vb;
SELECT * FROM vb;
;
;
;
;
select * from vb;
SELECT 1 UNION ALL (WITH cte AS MATERIALIZED (SELECT 42) SELECT * FROM cte);;
SELECT 1 UNION ALL (WITH cte AS MATERIALIZED (SELECT 42) SELECT * FROM cte);;
;
SELECT 1 UNION ALL (WITH cte AS MATERIALIZED (SELECT 42) SELECT * FROM cte);;
(SELECT 1) UNION ALL (WITH cte AS MATERIALIZED (SELECT 42)SELECT * FROM cte);
;
;
;
;
SELECT 1 UNION ALL (WITH cte AS MATERIALIZED (SELECT 42) SELECT * FROM cte);;
WITH RECURSIVE cte(d) AS MATERIALIZED (
		SELECT 1
	UNION ALL
		(WITH c(d) AS (SELECT * FROM cte)
			SELECT d + 1
			FROM c
			WHERE FALSE
		)
)
SELECT max(d) FROM cte;;
WITH RECURSIVE cte(d) AS MATERIALIZED (
		SELECT 1
	UNION ALL
		(WITH c(d) AS (SELECT * FROM cte)
			SELECT d + 1
			FROM c
			WHERE FALSE
		)
)
SELECT max(d) FROM cte;;
;
WITH RECURSIVE cte(d) AS MATERIALIZED (
		SELECT 1
	UNION ALL
		(WITH c(d) AS (SELECT * FROM cte)
			SELECT d + 1
			FROM c
			WHERE FALSE
		)
)
SELECT max(d) FROM cte;;
WITH RECURSIVE cte (d) AS MATERIALIZED ((SELECT 1) UNION  ALL (WITH c (d) AS (SELECT * FROM cte)SELECT (d + 1) FROM c WHERE CAST('f' AS BOOLEAN)))SELECT max(d) FROM cte;
;
;
;
;
WITH RECURSIVE cte(d) AS MATERIALIZED (
		SELECT 1
	UNION ALL
		(WITH c(d) AS (SELECT * FROM cte)
			SELECT d + 1
			FROM c
			WHERE FALSE
		)
)
SELECT max(d) FROM cte;;
with cte (a) as MATERIALIZED (
    select 1
)
select
    a as alias1,
    alias1 as alias2
from cte
where alias2 > 0;;
with cte (a) as MATERIALIZED (
    select 1
)
select
    a as alias1,
    alias1 as alias2
from cte
where alias2 > 0;;
;
with cte (a) as MATERIALIZED (
    select 1
)
select
    a as alias1,
    alias1 as alias2
from cte
where alias2 > 0;;
WITH cte (a) AS MATERIALIZED (SELECT 1)SELECT a AS alias1, alias1 AS alias2 FROM cte WHERE (alias2 > 0);
;
;
;
;
with cte (a) as MATERIALIZED (
    select 1
)
select
    a as alias1,
    alias1 as alias2
from cte
where alias2 > 0;;
WITH RECURSIVE t(x,v) AS (
  SELECT 1, ARRAY[] :: int[]
    UNION ALL
  (WITH u(x) AS MATERIALIZED (SELECT 1)
    SELECT f.x, (SELECT array_agg(x) FROM u)
    FROM   t, LATERAL (SELECT t.x + 1) AS f(x)
    WHERE  t.x < 5
  )
) SELECT * FROM t ORDER BY x;;
WITH RECURSIVE t(x,v) AS (
  SELECT 1, ARRAY[] :: int[]
    UNION ALL
  (WITH u(x) AS MATERIALIZED (SELECT 1)
    SELECT f.x, (SELECT array_agg(x) FROM u)
    FROM   t, LATERAL (SELECT t.x + 1) AS f(x)
    WHERE  t.x < 5
  )
) SELECT * FROM t ORDER BY x;;
;
WITH RECURSIVE t(x,v) AS (
  SELECT 1, ARRAY[] :: int[]
    UNION ALL
  (WITH u(x) AS MATERIALIZED (SELECT 1)
    SELECT f.x, (SELECT array_agg(x) FROM u)
    FROM   t, LATERAL (SELECT t.x + 1) AS f(x)
    WHERE  t.x < 5
  )
) SELECT * FROM t ORDER BY x;;
WITH RECURSIVE t (x, v) AS ((SELECT 1, CAST((ARRAY[]) AS INTEGER[])) UNION  ALL (WITH u (x) AS MATERIALIZED (SELECT 1)SELECT f.x, (SELECT array_agg(x) FROM u) FROM t , (SELECT (t.x + 1)) AS f(x) WHERE (t.x < 5)))SELECT * FROM t ORDER BY x;
;
;
;
;
WITH RECURSIVE t(x,v) AS (
  SELECT 1, ARRAY[] :: int[]
    UNION ALL
  (WITH u(x) AS MATERIALIZED (SELECT 1)
    SELECT f.x, (SELECT array_agg(x) FROM u)
    FROM   t, LATERAL (SELECT t.x + 1) AS f(x)
    WHERE  t.x < 5
  )
) SELECT * FROM t ORDER BY x;;
SELECT * FROM (WITH t(x) AS MATERIALIZED (SELECT * FROM generate_series(1,10) LIMIT 75%) SELECT * FROM t LIMIT 80%) AS _(x) ORDER BY x LIMIT 50%;;
SELECT * FROM (WITH t(x) AS MATERIALIZED (SELECT * FROM generate_series(1,10) LIMIT 75%) SELECT * FROM t LIMIT 80%) AS _(x) ORDER BY x LIMIT 50%;;
;
SELECT * FROM (WITH t(x) AS MATERIALIZED (SELECT * FROM generate_series(1,10) LIMIT 75%) SELECT * FROM t LIMIT 80%) AS _(x) ORDER BY x LIMIT 50%;;
SELECT * FROM (WITH t (x) AS MATERIALIZED (SELECT * FROM generate_series(1, 10) LIMIT (75) %)SELECT * FROM t LIMIT (80) %) AS _(x) ORDER BY x LIMIT (50) %;
;
;
;
;
SELECT * FROM (WITH t(x) AS MATERIALIZED (SELECT * FROM generate_series(1,10) LIMIT 75%) SELECT * FROM t LIMIT 80%) AS _(x) ORDER BY x LIMIT 50%;;
