PRAGMA enable_verification;
PRAGMA default_collation=NOCASE;
select typeof(x) from (select 1::INT as x group by x);
CREATE TABLE collate_test(s VARCHAR COLLATE NOACCENT.NOCASE);
INSERT INTO collate_test VALUES ('Mühleisen'), ('Hëllö');
SELECT * FROM collate_test WHERE s='Muhleisen';
SELECT * FROM collate_test WHERE s='muhleisen';
SELECT * FROM collate_test WHERE s='hEllô';
PRAGMA default_collation='NOCASE';
CREATE TABLE collate_test(s VARCHAR);
INSERT INTO collate_test VALUES ('hEllO'), ('WöRlD'), ('wozld');
SELECT COUNT(*) FROM collate_test WHERE 'BlA'='bLa';
SELECT * FROM collate_test WHERE s='hello';
SELECT * FROM collate_test ORDER BY s;
PRAGMA default_collation='NOCASE.NOACCENT';
SELECT * FROM collate_test ORDER BY s;
CREATE TABLE collate_test(s VARCHAR COLLATE NOACCENT);
INSERT INTO collate_test VALUES ('Mühleisen'), ('Hëllö');
SELECT * FROM collate_test WHERE s='Muhleisen';
SELECT * FROM collate_test WHERE s='mühleisen';
SELECT * FROM collate_test WHERE s='Hello';
CREATE TABLE collate_join_table(s VARCHAR, i INTEGER);
INSERT INTO collate_join_table VALUES ('Hello', 1), ('Muhleisen', 3);
SELECT collate_test.s, collate_join_table.s, i FROM collate_test JOIN collate_join_table ON (collate_test.s=collate_join_table.s) ORDER BY 1;
DROP TABLE collate_test;
CREATE TABLE collate_test(s VARCHAR COLLATE NOACCENT);
INSERT INTO collate_test VALUES ('Hällo'), ('Hallo'), ('Hello');
SELECT * FROM collate_test ORDER BY s;
DROP TABLE collate_test;
CREATE TABLE collate_test(s VARCHAR COLLATE NOACCENT);
INSERT INTO collate_test VALUES ('Hällo'), ('Hallo');
SELECT DISTINCT s FROM collate_test;
PRAGMA enable_verification;
SELECT 'a' AS c1 ORDER BY 1 COLLATE NOCASE;
SELECT 'a' ORDER BY 1 COLLATE NOCASE;
SELECT 'A', 'B' ORDER BY 2 COLLATE NOCASE;
SELECT 999::VARCHAR ORDER BY 1 COLLATE NOCASE;
SELECT 999 FROM ORDER BY 1 COLLATE NOCASE;
SELECT 'a' FROM ORDER BY -1 COLLATE NOCASE;
SELECT 'a' FROM ORDER BY 0 COLLATE NOCASE;
SELECT 'a' FROM ORDER BY -0 COLLATE NOCASE;
CREATE TABLE collate_test(s VARCHAR);
INSERT INTO collate_test VALUES ('ã'),('B'),('a'),('A');
SELECT s FROM collate_test ORDER BY 1 COLLATE NOCASE;
SELECT s FROM collate_test ORDER BY s COLLATE NOCASE;
SELECT CONCAT(s, s) FROM collate_test ORDER BY 1 COLLATE NOCASE;
SELECT CONCAT(s, s) AS concat, concat FROM collate_test ORDER BY 2 COLLATE NOCASE;
SELECT collate_test.s FROM collate_test ORDER BY 1 COLLATE NOCASE;
SELECT CASE WHEN s[1]='a' THEN s ELSE NULL END FROM collate_test ORDER BY 1 COLLATE NOCASE;
SELECT (SELECT s) FROM collate_test ORDER BY 1 COLLATE NOCASE;
SELECT (SELECT s) AS c1 FROM collate_test ORDER BY c11 COLLATE NOCASE;
SELECT concat('a', (SELECT s)) FROM collate_test ORDER BY 1 COLLATE NOCASE;
CREATE TABLE collate_test(s VARCHAR, t VARCHAR);
INSERT INTO collate_test VALUES ('mark', 'muhleisen');
SELECT COUNT(*) FROM collate_test WHERE 'mórritz' BETWEEN s AND t;
SELECT COUNT(*) FROM collate_test WHERE 'mórritz' COLLATE NOACCENT BETWEEN s AND t;
SELECT COUNT(*) FROM collate_test WHERE 'mórritz' BETWEEN (s COLLATE NOACCENT) AND t;
SELECT COUNT(*) FROM collate_test WHERE 'mórritz' BETWEEN s AND (t COLLATE NOACCENT);
PRAGMA default_collation='NOACCENT';
SELECT COUNT(*) FROM collate_test WHERE 'mórritz' BETWEEN s AND t;
CREATE TABLE collate_test(s VARCHAR COLLATE blabla);
CREATE TABLE collate_test(s INTEGER COLLATE blabla);
CREATE TABLE collate_test(s VARCHAR COLLATE NOACCENT.NOACCENT);
CREATE TABLE collate_test(s VARCHAR COLLATE 1);
CREATE TABLE collate_test(s VARCHAR COLLATE 'hello');
PRAGMA default_collation='blabla';
PRAGMA collations;
PRAGMA collations=3;
CREATE TABLE collate_test(s VARCHAR COLLATE NOCASE);
INSERT INTO collate_test VALUES ('hello'), ('WoRlD'), ('world'), ('Mühleisen');
SELECT * FROM collate_test WHERE s='HeLlo';
SELECT * FROM collate_test WHERE s='MÜhleisen';
SELECT * FROM collate_test WHERE s='world';
CREATE TABLE collate_join_table(s VARCHAR, i INTEGER);
INSERT INTO collate_join_table VALUES ('HeLlO', 1), ('mÜHLEISEN', 3);
SELECT collate_test.s, collate_join_table.s, i FROM collate_test JOIN collate_join_table ON (collate_test.s=collate_join_table.s) ORDER BY i;
DROP TABLE collate_test;
CREATE TABLE collate_test(s VARCHAR COLLATE NOCASE);
INSERT INTO collate_test VALUES ('Hallo'), ('ham'), ('HELLO'), ('hElp');
SELECT * FROM collate_test ORDER BY s;
DROP TABLE collate_test;
CREATE TABLE collate_test(s VARCHAR COLLATE NOCASE);
INSERT INTO collate_test VALUES ('Hallo'), ('hallo');
SELECT DISTINCT s FROM collate_test;
CREATE TABLE collate_test(s VARCHAR);
INSERT INTO collate_test VALUES ('hEllO'), ('WöRlD'), ('wozld');
SELECT 'hëllo' COLLATE NOACCENT='hello';
SELECT 'hëllo' COLLATE POSIX='hello';
SELECT 'hëllo' COLLATE C='hello';
SELECT * FROM collate_test WHERE s='hello';
SELECT * FROM collate_test WHERE s='hello' COLLATE NOCASE;
SELECT * FROM collate_test WHERE s COLLATE NOCASE='hello';
SELECT * FROM collate_test WHERE s COLLATE NOCASE='hello' COLLATE NOACCENT;
SELECT * FROM collate_test ORDER BY s COLLATE NOCASE;
SELECT * FROM collate_test ORDER BY s COLLATE NOCASE.NOACCENT;
