PRAGMA enable_verification;
create table a(i integer);;
insert into a values (42);;
WITH t(x) AS MATERIALIZED (VALUES (42))
INSERT INTO a (SELECT * FROM t);;
WITH t(x) AS MATERIALIZED (VALUES (42))
DELETE FROM a WHERE a.i IN (SELECT * FROM t);;
WITH t(x) AS MATERIALIZED (VALUES (42))
UPDATE a SET i = 0 WHERE a.i IN (SELECT * FROM t);;
WITH t(x) AS MATERIALIZED (SELECT 1),
     u(x) AS MATERIALIZED (SELECT 2 UNION ALL SELECT * FROM t)
DELETE FROM a WHERE a.i IN (SELECT * FROM u);;
WITH t(x) AS MATERIALIZED (SELECT 1),
     u(x) AS MATERIALIZED (SELECT 2 UNION ALL SELECT * FROM t)
UPDATE a SET i = 0 WHERE a.i IN (SELECT * FROM u);;
WITH t(x) AS MATERIALIZED (SELECT 1),
     u(x) AS MATERIALIZED (SELECT 2 UNION ALL SELECT * FROM t)
INSERT INTO a (SELECT * FROM u);;
WITH t(x) AS MATERIALIZED (SELECT 1)
DELETE FROM a WHERE i IN (WITH s(x) AS MATERIALIZED (SELECT x + 41 FROM t) SELECT * FROM t);;
WITH t(x) AS MATERIALIZED (SELECT 1)
DELETE FROM a WHERE i IN (WITH s(x) AS MATERIALIZED (SELECT x + 41 FROM t) SELECT * FROM s);;
