PRAGMA enable_verification;
CREATE TYPE mood AS ENUM ('sad', 'ok', 'happy', 'anxious');
CREATE TABLE test (x mood);
INSERT INTO test VALUES ('ok'), ('sad'), ('anxious'), ('happy');
SELECT enum_code(x) FROM test;
SELECT enum_code(x) FROM test;
;
SELECT enum_code(x) FROM test;
SELECT enum_code(x) FROM test;
;
;
;
;
SELECT enum_code(x) FROM test;
SELECT enum_code('bla');
SELECT enum_code('bla');
;
SELECT enum_code('bla');
SELECT enum_code('bla');
PREPARE p1 as SELECT enum_code(x) FROM test;
EXECUTE p1;
PREPARE p2 as SELECT enum_code(?);;
EXECUTE p2('happy'::mood);
