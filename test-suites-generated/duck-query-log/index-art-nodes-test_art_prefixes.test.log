PRAGMA enable_verification;
CREATE TABLE different_prefixes(str VARCHAR);;
INSERT INTO different_prefixes SELECT 'my first very long prefix that is really very long' || range FROM range(2048);;
INSERT INTO different_prefixes SELECT (range / 100)::VARCHAR || range::VARCHAR FROM range(2048);;
INSERT INTO different_prefixes SELECT 'my first very long prefix, the other not quite as long prefix that is still very long' || range FROM range(2048);;
INSERT INTO different_prefixes SELECT 'my first very long prefix, the other not quite as long prefix that is still very long and even longer omg!' || range FROM range(2048);;
INSERT INTO different_prefixes SELECT range::VARCHAR || (range + 1)::VARCHAR FROM range(2048);;
CREATE INDEX idx_different_prefixes ON different_prefixes(str);;
DELETE FROM different_prefixes
WHERE rowid IN (SELECT rowid FROM different_prefixes LIMIT 1000);;
DELETE FROM different_prefixes
WHERE rowid IN (SELECT rowid FROM different_prefixes LIMIT 3000);;
DROP INDEX idx_different_prefixes;;
CREATE TABLE longer_prefixes(str VARCHAR);;
INSERT INTO longer_prefixes
SELECT 'my first very long prefix that is really very long' || range FROM range(2048);;
INSERT INTO longer_prefixes
SELECT 'my first very long prefix, the other not quite as long prefix that is still very long' || range FROM range(2048);;
CREATE INDEX idx_longer_prefixes ON longer_prefixes(str);;
SELECT str FROM longer_prefixes
WHERE str = 'my first very long prefix that is really very long77';;
SELECT str FROM longer_prefixes
WHERE str = 'my first very long prefix that is really very long77';;
;
SELECT str FROM longer_prefixes
WHERE str = 'my first very long prefix that is really very long77';;
SELECT str FROM longer_prefixes WHERE (str = 'my first very long prefix that is really very long77');
;
;
;
;
SELECT str FROM longer_prefixes
WHERE str = 'my first very long prefix that is really very long77';;
DROP INDEX idx_longer_prefixes;;
CREATE TABLE distinct_prefixes (str VARCHAR);;
INSERT INTO distinct_prefixes SELECT
	'2022-01-01'::DATE + range::INTEGER * 1000 ||
	'1004-02-01'::DATE + range::INTEGER * 100 ||
	'.' || '6004-02-01'::DATE + range::INTEGER * 2000
	FROM range(100000);;
CREATE INDEX idx_distinct_prefixes ON distinct_prefixes(str);;
DROP INDEX idx_distinct_prefixes;;
CREATE TABLE mixed_distinct_prefixes (str VARCHAR);;
INSERT INTO mixed_distinct_prefixes SELECT
	'2022-01-01'::DATE + range::INTEGER * 1000
	FROM range(100000);;
INSERT INTO mixed_distinct_prefixes SELECT
	'2022-01-01'::DATE + range::INTEGER * 1000 ||
	'1004-02-01'::DATE + range::INTEGER * 100
	FROM range(100000);;
INSERT INTO mixed_distinct_prefixes SELECT
	'2022-01-01'::DATE + range::INTEGER * 1000 ||
	'1004-02-01'::DATE + range::INTEGER * 100 ||
	'.' || '6004-02-01'::DATE + range::INTEGER * 2000
	FROM range(100000);;
CREATE INDEX idx_mixed_distinct_prefixes ON mixed_distinct_prefixes(str);;
DELETE FROM mixed_distinct_prefixes
WHERE rowid IN (SELECT rowid FROM mixed_distinct_prefixes LIMIT 1000);;
DELETE FROM mixed_distinct_prefixes
WHERE rowid IN (SELECT rowid FROM mixed_distinct_prefixes LIMIT 1000);;
DELETE FROM mixed_distinct_prefixes
WHERE rowid IN (SELECT rowid FROM mixed_distinct_prefixes LIMIT 1000);;
DROP INDEX idx_mixed_distinct_prefixes;;
