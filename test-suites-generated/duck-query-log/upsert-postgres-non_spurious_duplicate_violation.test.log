pragma enable_verification;;
create table insertconflicttest(
	key int4,
	fruit text,
	other int4,
	unique (key),
	unique (fruit)
);;
insert into insertconflicttest values (25, 'Fig', 0) on conflict (fruit) do update set other = 1;
insert into insertconflicttest values (23, 'Blackberry', 0) on conflict (key) where fruit like '%berry' do update set other = 1;
insert into insertconflicttest as t values (23, 'Blackberry', 0) on conflict (key) where fruit like '%berry' and t.fruit = 'inconsequential' do nothing;;
insert into insertconflicttest as i values (23, 'Jackfruit', 0) on conflict (key) do update set other = 1;
insert into insertconflicttest as i values (23, 'Jackfruit', 0) on conflict (key) do update set other = 1;
insert into insertconflicttest as i values (23, 'Jackfruit', 0) on conflict (key) do update set other = 1;
insert into insertconflicttest as i values (23, 'Avocado', 0) on conflict (key) do update set other = 1;
insert into insertconflicttest as i values (23, 'Avocado', 0) on conflict (key) do update set other = 1;
insert into insertconflicttest as i values (23, 'Avocado', 0) on conflict (key) do update set other = 1;
drop table insertconflicttest;;
