PRAGMA enable_verification;
ATTACH DATABASE ':memory:' AS new_database;;
CREATE SCHEMA new_database.s1;;
CREATE TABLE new_database.s1.integers(i INTEGER);
INSERT INTO new_database.s1.integers VALUES (42);;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
;
;
;
SELECT * FROM new_database.s1.integers;
UPDATE new_database.s1.integers SET i=i+1;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
;
;
;
SELECT * FROM new_database.s1.integers;
DELETE FROM new_database.s1.integers WHERE i=43;
SELECT COUNT(*) FROM new_database.s1.integers;
SELECT COUNT(*) FROM new_database.s1.integers;
;
SELECT COUNT(*) FROM new_database.s1.integers;
SELECT count_star() FROM new_database.s1.integers;
;
;
;
;
SELECT COUNT(*) FROM new_database.s1.integers;
ALTER TABLE new_database.s1.integers ADD COLUMN j VARCHAR;
INSERT INTO new_database.s1.integers VALUES (1, 'T100');;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
;
;
;
SELECT * FROM new_database.s1.integers;
ALTER TABLE new_database.s1.integers ALTER j TYPE INT USING REPLACE(j, 'T', '')::INT;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
;
;
;
SELECT * FROM new_database.s1.integers;
ALTER TABLE new_database.s1.integers DROP COLUMN j;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
SELECT * FROM new_database.s1.integers;
SELECT * FROM new_database.s1.integers;
;
;
;
;
SELECT * FROM new_database.s1.integers;
ALTER TABLE new_database.s1.integers RENAME COLUMN i TO k;
SELECT k FROM new_database.s1.integers;
SELECT k FROM new_database.s1.integers;
;
SELECT k FROM new_database.s1.integers;
SELECT k FROM new_database.s1.integers;
;
;
;
;
SELECT k FROM new_database.s1.integers;
DROP TABLE new_database.s1.integers;
CREATE TABLE new_database.s1.t1(i INTEGER);
ALTER TABLE new_database.s1.t1 RENAME TO t2;
SELECT * FROM new_database.s1.t2;
SELECT * FROM new_database.s1.t2;
;
SELECT * FROM new_database.s1.t2;
SELECT * FROM new_database.s1.t2;
;
;
;
;
SELECT * FROM new_database.s1.t2;
DROP TABLE new_database.s1.t2;
CREATE TABLE new_database.integers(i INTEGER);
INSERT INTO new_database.integers VALUES (42);;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
;
;
;
SELECT * FROM new_database.integers;
UPDATE new_database.integers SET i=i+1;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
;
;
;
SELECT * FROM new_database.integers;
DELETE FROM new_database.integers WHERE i=43;
SELECT COUNT(*) FROM new_database.integers;
SELECT COUNT(*) FROM new_database.integers;
;
SELECT COUNT(*) FROM new_database.integers;
SELECT count_star() FROM new_database.integers;
;
;
;
;
SELECT COUNT(*) FROM new_database.integers;
ALTER TABLE new_database.integers ADD COLUMN j VARCHAR;
INSERT INTO new_database.integers VALUES (1, 'T100');;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
;
;
;
SELECT * FROM new_database.integers;
ALTER TABLE new_database.integers ALTER j TYPE INT USING REPLACE(j, 'T', '')::INT;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
;
;
;
SELECT * FROM new_database.integers;
ALTER TABLE new_database.integers DROP COLUMN j;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
SELECT * FROM new_database.integers;
SELECT * FROM new_database.integers;
;
;
;
;
SELECT * FROM new_database.integers;
ALTER TABLE new_database.integers RENAME COLUMN i TO k;
SELECT k FROM new_database.integers;
SELECT k FROM new_database.integers;
;
SELECT k FROM new_database.integers;
SELECT k FROM new_database.integers;
;
;
;
;
SELECT k FROM new_database.integers;
DROP TABLE new_database.integers;
CREATE TABLE new_database.t1(i INTEGER);
ALTER TABLE new_database.t1 RENAME TO t2;
SELECT * FROM new_database.t2;
SELECT * FROM new_database.t2;
;
SELECT * FROM new_database.t2;
SELECT * FROM new_database.t2;
;
;
;
;
SELECT * FROM new_database.t2;
DROP TABLE new_database.t2;
